(function(n,t,i){var r;r=function(){function n(){r.init()}var r;return r=n.prototype,n.prototype.newArea=i.observable(""),n.prototype.areas=i.observableArray([]),n.prototype.initAreaControls=function(){t("#areas article").on("dragover",function(n){n.preventDefault()});t("#areas article").on("drop",function(n){var u,e,i,f,r;n.preventDefault(),r=n.originalEvent.dataTransfer.getData("CardID",r),f=t("*[data-cardid="+r+"]"),u=t(n.target).closest("#areas article"),e=t(u).data("areaid"),i={},i.ID=r,i.AreaID=e,i.Name=t(f).text(),t.ajax({url:"/api/cards/"+i.ID,type:"PUT",data:i,success:function(){var n;n=u.find("ul"),n.append(f)}})});t("#areas li").on("dragstart",function(n){var i;i=t(n.target).data("cardid"),n.originalEvent.dataTransfer.setData("CardID",i)});t("article footer div").hide();t("article footer a").on("click",function(){t(this).parent().find("div").fadeToggle()})},n.prototype.refresh=function(){t.getJSON("/api/areas",function(n){r.areas(n),r.initAreaControls()})},n.prototype.addCard=function(){var i,n,u;i=this.ID,u=t("*[data-areaid="+i+"]").find("textarea").val(),n={},n.AreaID=i,n.Name=u,t.post("/api/cards",n,function(){r.refresh()})},n.prototype.addArea=function(){var n;n={},n.Name=r.newArea(),t.post("/api/areas",n,function(){r.refresh()}),t("#new-area").fadeToggle(),r.newArea("")},n.prototype.showArea=function(){t("#new-area").fadeToggle()},n.prototype.init=function(){t("#new-area").hide(),r.refresh()},n}(),n.ViewModel=r})(window.Cards=window.Cards||{},jQuery,ko)