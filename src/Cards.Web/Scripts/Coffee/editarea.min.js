(function(n,t,i,r){t.Class.AreaViewModel=function(){var t;return t=this,t.rootUrl=r("meta[name=cards-baseurl]").attr("content"),t.area={},t.showError=function(n){r("#error-modal").show(),r("#error-modal span").text(n)},t.initControls=function(){r("#error-modal").live("click",function(){r(this).fadeOut()});r("body").on({ajaxStart:function(){r("#error-modal").hide(),r(this).addClass("loading")},ajaxStop:function(){r(this).removeClass("loading")}})},t.deleteArea=function(){var u;u=i.mapping.toJS(t.area),r.ajax({url:t.rootUrl+"api/areas/"+u.ID,type:"DELETE"}).done(function(){n.location.href=t.rootUrl+"areas"}).fail(function(){t.showError("Santa can't figured out what happened, can you try it again")})},t.updateArea=function(){var u;u=i.mapping.toJS(t.area),r.ajax({url:t.rootUrl+"api/areas/"+u.ID,type:"PUT",data:u}).done(function(){n.location.href=t.rootUrl+"areas"}).fail(function(){t.showError("Santa can't figured out what happened, can you try it again")})},t.getArea=function(){var n;n=r(".edit-section").data("areaid"),r.getJSON(t.rootUrl+"api/areas/"+n).done(function(n){t.area=i.mapping.fromJS(n),i.applyBindings(t)}).fail(function(){t.showError("Santa can't figured out what happened, can you try it again")})},t.onReady=function(){t.initControls(),t.getArea()},t},t.createObject("AreaViewModel")})(window,cards,ko,jQuery)