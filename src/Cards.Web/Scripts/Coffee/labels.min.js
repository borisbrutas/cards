(function(n,t,i){n.Class.LabelsViewModel=function(){var n;return n=this,n.rootUrl=t("meta[name=cards-baseurl]").attr("content"),n.labels=i.observableArray([]),n.newLabel={Name:i.observable(""),Color:i.observable("")},n.onReady=function(){i.applyBindings(n),n.initialize(),n.refresh()},n.refresh=function(){t.getJSON(n.rootUrl+"api/labels").done(function(t){n.labels(t),n.colorize()}).fail(function(){n.showError("Santa can't figured out what happened, can you try it again?")})},n.addLabel=function(){var r;r=i.toJS(n.newLabel),t.post(n.rootUrl+"api/labels",r).done(function(){n.refresh()}).fail(function(){n.showError("Santa can't figured out what happened, can you try it again?")})},n.colorizeLabel=function(n){var r,i;i=t(n),r=i.data("color"),i.css("background-color",r)},n.colorize=function(){var u,r,i,f;for(r=t("#labels-big span"),i=0,f=r.length;i<f;i++)u=r[i],n.colorizeLabel(u)},n.showError=function(n){t("#error-modal").show(),t("#error-modal span").text(n)},n.initialize=function(){t("body").on({ajaxStart:function(){t("#error-modal").hide(),t(this).addClass("loading")},ajaxStop:function(){t(this).removeClass("loading")}})},n},n.createObject("LabelsViewModel")})(cards,jQuery,ko)